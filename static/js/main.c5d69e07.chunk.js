(this.webpackJsonpuottahackproject=this.webpackJsonpuottahackproject||[]).push([[0],{219:function(e,t,n){},301:function(e,t,n){},355:function(e,t){},356:function(e,t){},364:function(e,t){},367:function(e,t){},368:function(e,t){},371:function(e,t,n){"use strict";n.r(t);var a=n(17),c=n.n(a),i=n(155),o=n.n(i),s=(n(301),n(6)),r=n(206),u=n(124),d=n(165),l=n(5),h=n(10),j=n(50),b=n(13),f=n(14),p=(n(302),n(303),n(219),n(31)),g=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).streamCamVideo=a.streamCamVideo.bind(Object(j.a)(a)),a}return Object(h.a)(n,[{key:"streamCamVideo",value:function(){navigator.mediaDevices.getUserMedia({audio:!1,video:{width:600,height:300}}).then((function(e){var t=document.querySelector("video");t.srcObject=e,t.onloadedmetadata=function(e){document.getElementById("img-to-proscess").style.visibility="visible",t.play()}})).catch((function(e){console.log(e.name+": "+e.message)}))}},{key:"componentDidMount",value:function(){this.streamCamVideo()}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"videoelement",style:{position:"absolute"},children:[Object(p.jsxs)("div",{id:"container",className:"directvideo",children:[Object(p.jsx)("video",{"no-controls":!0,id:"img-to-proscess",autoPlay:!0}),Object(p.jsx)("canvas",{id:"what-the-ai-sees"})]}),Object(p.jsx)("br",{})]})}}]),n}(c.a.Component),m=n(4),O=n.n(m),v=n(11),x=n(160),y=n.n(x),w=n(114);function I(e,t){var n={params:{coughs:e,newfacetouches:t}};console.log(n),y.a.get("https://us-central1-virtual-vinyls.cloudfunctions.net/api/modifyhackdata",{params:{coughs:e,newfacetouches:t}}).then((function(e){return e}))}function k(){var e=Object(a.useContext)(ne);return Object(a.useEffect)((function(){function e(){return(e=Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setInterval((function(){I(document.getElementById("snipe1").innerHTML,document.getElementById("snipe2").innerHTML)}),6e4);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(p.jsx)("div",{className:"dashboard",children:Object(p.jsx)(r.a,{children:Object(p.jsx)(d.a,{children:Object(p.jsxs)(w.a,{children:[Object(p.jsx)(u.a,{children:Object(p.jsxs)(w.a.Body,{children:[Object(p.jsx)(w.a.Title,{children:"Coughs"}),Object(p.jsx)(w.a.Text,{id:"snipe1",children:e.cough.get})]})}),Object(p.jsx)(u.a,{children:Object(p.jsxs)(w.a.Body,{children:[Object(p.jsx)(w.a.Title,{children:"Face Touches"}),Object(p.jsx)(w.a.Text,{id:"snipe2",children:e.facetouch.get})]})})]})})})})}var T=n(167),C=n(224),E=n(208);function B(){return Object(p.jsxs)(T.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(p.jsx)(T.a.Brand,{children:Object(p.jsx)(E.b,{to:"/",className:"whitelink",children:"CovidEye"})}),Object(p.jsx)(T.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(p.jsx)(T.a.Collapse,{id:"responsive-navbar-nav",children:Object(p.jsx)(C.a,{className:"mr-auto",children:Object(p.jsx)(C.a.Link,{className:"whitelink",href:"https://alex-walsh.github.io/uOttaHack2021/about-us/",children:"About Us"})})})]})}var L,S=n(275);n(272);function M(e,t){return Math.hypot(t.x-e.x,t.y-e.y)}function D(){L.facetouch.set(L.facetouch.get+1)}function N(){L.cough.set(L.cough.get+1)}function H(e){return new Promise((function(t){return setTimeout(t,e)}))}var F=!0,P=!0;function V(e){return A.apply(this,arguments)}function A(){return(A=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"cough"===t&&F?(F=!1,N(),H(2e3).then((function(){F=!0}))):"touch"===t&&P&&(P=!1,D(),H(2e3).then((function(){P=!0})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){var t=document.getElementById("what-the-ai-sees").getContext("2d"),n=document.getElementById("what-the-ai-sees"),a=document.getElementById("img-to-proscess");!function(e){var t=e.videoWidth/e.videoHeight,n=e.offsetWidth,a=e.offsetHeight;n/a>t?n=a*t:a=n/t}(a);n.width=512,n.height=288,t.drawImage(a,0,0,512,288),e.forEach((function(e){var n;e.keypoints.forEach((function(e){e.score>.5&&function(e,t,n,a){e.beginPath(),e.arc(t,n,a,0,2*Math.PI),e.fillStyle="#FF0000",e.fill()}(t,e.position.x,e.position.y,3)})),(M((n=e.keypoints)[7].position,n[0].position)<=80||M(n[8].position,n[0].position)<=80)&&V("cough"),(M(n[10].position,n[0].position)<=80||M(n[9].position,n[0].position)<=80)&&V("touch")}))};function U(e){return W.apply(this,arguments)}function W(){return(W=Object(v.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=document.getElementById("img-to-proscess"))){e.next=8;break}return n.height=288,n.width=512,e.next=6,t.estimateMultiplePoses(n);case 6:a=e.sent,J(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return R.apply(this,arguments)}function R(){return(R=Object(v.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a({architecture:"ResNet50"});case 2:t=e.sent,document.getElementById("img-to-proscess").addEventListener("loadeddata",(function(){setInterval((function(){return U(t)}),100)})),console.log("INIT");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z,G,K,Q,X=function(){return L=Object(a.useContext)(ne),Object(a.useEffect)(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q();case 1:case"end":return e.stop()}}),e)}))),[]),Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(g,{})})},Y=n(295),Z=n.n(Y);var $=function(){return Object(a.useEffect)((function(){z=[2,1,0,2,0,2,1],G=[0,2,1,2,0,1,0],K=0,Q=0,function(){console.log(z,G);var e=new Date,t=e.toLocaleTimeString(),n=document.getElementById("myChart").getContext("2d"),a=new Z.a(n,{type:"line",data:{labels:[new Date(e-6e3).toLocaleTimeString(),new Date(e-5e3).toLocaleTimeString(),new Date(e-4e3).toLocaleTimeString(),new Date(e-3e3).toLocaleTimeString(),new Date(e-2e3).toLocaleTimeString(),new Date(e-1e3).toLocaleTimeString(),t],datasets:[{label:"Coughs",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:z},{label:"Face Touches",backgroundColor:"rgb(255, 255, 132)",borderColor:"rgb(255, 255, 132)",data:G}]},options:{}});setInterval((function(){console.log("moving"),a.data.labels.push((new Date).toLocaleTimeString()),a.data.labels.shift(),a.data.datasets[0].data.push(parseInt(document.getElementById("snipe1").innerHTML)-K),a.data.datasets[1].data.push(parseInt(document.getElementById("snipe2").innerHTML)-Q),a.data.datasets[0].data.shift(),a.data.datasets[1].data.shift(),K=document.getElementById("snipe1").innerHTML,Q=document.getElementById("snipe2").innerHTML,a.update()}),1e3)}()}),[]),Object(p.jsx)("div",{children:Object(p.jsx)("canvas",{id:"myChart"})})};function _(){return Object(p.jsx)(r.a,{children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)(d.a,{lg:8,children:Object(p.jsx)(X,{})}),Object(p.jsxs)(d.a,{lg:4,children:[Object(p.jsx)(u.a,{children:Object(p.jsx)($,{})}),Object(p.jsx)(u.a,{children:Object(p.jsx)(k,{})})]})]})})}var ee=n(51);function te(){return Object(p.jsx)("div",{children:"about us"})}var ne=Object(a.createContext)({});var ae=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),o=Object(s.a)(i,2),r=o[0],u=o[1],d={cough:{get:n,set:c},facetouch:{get:r,set:u}};return Object(a.useEffect)((function(){y.a.get("https://us-central1-virtual-vinyls.cloudfunctions.net/api/gethackdata").then((function(e){c(parseInt(e.data.cough)),u(parseInt(e.data.facethouch))}))}),[]),Object(p.jsx)(E.a,{children:Object(p.jsxs)(ne.Provider,{value:d,children:[Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(B,{})}),Object(p.jsxs)(ee.c,{children:[Object(p.jsx)(ee.a,{exact:!0,path:"/",children:Object(p.jsx)(_,{})}),Object(p.jsx)(ee.a,{path:"aboutus",children:Object(p.jsx)(te,{})})]})]})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,374)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};n(370);o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(ae,{})}),document.getElementById("root")),ce()}},[[371,1,2]]]);
//# sourceMappingURL=main.c5d69e07.chunk.js.map